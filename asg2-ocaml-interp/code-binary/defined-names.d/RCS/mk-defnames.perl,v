head	1.4;
access;
symbols;
locks;
comment	@# @;


1.4
date	2020.01.24.22.03.03;	author -;	state -;
branches;
next	1.3;

1.3
date	2020.01.24.21.51.59;	author -;	state -;
branches;
next	1.2;

1.2
date	2020.01.24.21.16.29;	author -;	state -;
branches;
next	1.1;

1.1
date	2020.01.24.21.11.47;	author -;	state -;
branches;
next	;


desc
@@


1.4
log
@-
@
text
@#!/usr/bin/perl
# $Id: mk-defnames.perl,v 1.3 2020-01-24 13:51:59-08 - - $

@@mlfiles = (glob ("../*.mli"), glob ("../*.ml"));

map {s|.*/(.*)\.mli?$|$1|; $prefix{$_} = 1} @@mlfiles;

sub cmd {
   print "@@_\n";
   system "@@_";
}

for $prefix (keys %prefix) {
   @@morefiles = ();
   for $suffix (qw (mli ml)) {
      $file = "$prefix.$suffix";
      if (-e "../$file") {
         cmd "(cd ..; ocamlopt -i $file) >$file.defs";
         push @@morefiles, "$file.defs";
      }
   }
   cmd "more @@morefiles >$prefix.defines </dev/null";
   cmd "rm @@morefiles";
}

cmd "mkpspdf Listing.defines.ps *.defines";

@


1.3
log
@-
@
text
@d2 1
a2 1
# $Id: mk-defnames.perl,v 1.2 2020-01-24 13:16:29-08 - - $
d8 5
d18 2
a19 2
         system "ocamlopt -i "../$file" >$file.defs";
         push @@morefiles, $file.defs;
d22 2
a23 2
   system "more @@morefiles >$prefix.defines </dev/null";
   system "rm @@morefiles";
d25 3
@


1.2
log
@-
@
text
@d2 1
a2 1
# $Id: mk-defnames.perl,v 1.1 2020-01-24 13:11:47-08 - - $
d4 1
a4 1
@@mlfiles = (glob "../*.ml"), (glob "../*.mli");
d6 13
a18 4
sub filecmp {
   my $aa = $a; $aa =~ s/\.mli?$//;
   my $bb = $b; $bb =~ s/\.ml?$//;
   $aa ne $bb ? $aa cmp $bb : $b cmp $a;
a19 4

print "$_\n" for sort {filecmp} @@mlfiles;


@


1.1
log
@-
@
text
@d2 13
a14 1
# $Id$
@
